package testcases;

import io.qameta.allure.*;
import io.qameta.allure.junit4.DisplayName;
import org.junit.After;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import pageObject.LoginModal;
import pageObject.MainPage;
import session.Sesion;

import java.net.MalformedURLException;
import java.util.concurrent.TimeUnit;


public class TodoIstTest {

    MainPage mainPage = new MainPage();
    LoginModal loginModal = new LoginModal();

    @Before
    public void before() {
        Sesion.getInstance().getDriver().get("https://todoist.com/");
    }


    @DisplayName("Prueba de Vulnerabilidad a la URL: https://todoist.com/es")
    @Description("Se realizara la inspeccion de las multiples vulnerabilidads de: https://todoist.com/")
    @Issue("Bug001")
    @Severity(SeverityLevel.CRITICAL)
    @Test
    public void verifyTheProjectIsLogged() throws MalformedURLException {
        mainPage.loginButton.click();
        loginModal.emailTextBox.setValue("albertoc@gmail.com");
        loginModal.passwordTextBox.setValue("1231289763219");
        loginModal.loginButton.click();
        String actualResult = loginModal.errorLoginLabel.getText();
        String expectedResult = "Wrong email or password.";
        Assert.assertEquals(expectedResult, actualResult);
    }

    @After
    public void after() {
        Sesion.getInstance().closeSesion();
    }


}
